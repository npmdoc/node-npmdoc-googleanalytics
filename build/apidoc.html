<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/ncb000gt/node-googleanalytics"

    >googleanalytics (v0.3.7)</a>
</h1>
<h4>Google Analytics library.</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.googleanalytics">module googleanalytics</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.googleanalytics.GA">
            function <span class="apidocSignatureSpan">googleanalytics.</span>GA
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">googleanalytics.</span>GA.prototype</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.googleanalytics.GA">module googleanalytics.GA</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.googleanalytics.GA.GA">
            function <span class="apidocSignatureSpan">googleanalytics.</span>GA
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.googleanalytics.GA.super_">
            function <span class="apidocSignatureSpan">googleanalytics.GA.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.googleanalytics.GA.prototype">module googleanalytics.GA.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.googleanalytics.GA.prototype.captureToken">
            function <span class="apidocSignatureSpan">googleanalytics.GA.prototype.</span>captureToken
            <span class="apidocSignatureSpan">(err, token)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.googleanalytics.GA.prototype.get">
            function <span class="apidocSignatureSpan">googleanalytics.GA.prototype.</span>get
            <span class="apidocSignatureSpan">(options, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.googleanalytics.GA.prototype.login">
            function <span class="apidocSignatureSpan">googleanalytics.GA.prototype.</span>login
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.googleanalytics" id="apidoc.module.googleanalytics">module googleanalytics</a></h1>


    <h2>
        <a href="#apidoc.element.googleanalytics.GA" id="apidoc.element.googleanalytics.GA">
        function <span class="apidocSignatureSpan">googleanalytics.</span>GA
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function GA(config) {
    if (config) {
        if (&#x27;user&#x27; in config) {
            this.user = config.user;
            this.tokenType = &#x27;GoogleLogin&#x27;;
        }
        if (&#x27;password&#x27; in config) {
            this.password = config.password;
        }
        this.token = (&#x27;token&#x27; in config) ? config.token : null;
        if (&#x27;token&#x27; in config) {
            this.tokenType = config.tokenType || &#x27;Bearer&#x27;;
        }
        if (&#x27;token&#x27; in config &#x26;&#x26; (&#x27;user&#x27; in config || &#x27;password&#x27; in config)) {
            throw Error(&#x22;Invalid config.&#x22;);
        }
    } else {
        throw Error(&#x22;No config given.&#x22;);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.googleanalytics.GA" id="apidoc.module.googleanalytics.GA">module googleanalytics.GA</a></h1>


    <h2>
        <a href="#apidoc.element.googleanalytics.GA.GA" id="apidoc.element.googleanalytics.GA.GA">
        function <span class="apidocSignatureSpan">googleanalytics.</span>GA
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function GA(config) {
    if (config) {
        if (&#x27;user&#x27; in config) {
            this.user = config.user;
            this.tokenType = &#x27;GoogleLogin&#x27;;
        }
        if (&#x27;password&#x27; in config) {
            this.password = config.password;
        }
        this.token = (&#x27;token&#x27; in config) ? config.token : null;
        if (&#x27;token&#x27; in config) {
            this.tokenType = config.tokenType || &#x27;Bearer&#x27;;
        }
        if (&#x27;token&#x27; in config &#x26;&#x26; (&#x27;user&#x27; in config || &#x27;password&#x27; in config)) {
            throw Error(&#x22;Invalid config.&#x22;);
        }
    } else {
        throw Error(&#x22;No config given.&#x22;);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.googleanalytics.GA.super_" id="apidoc.element.googleanalytics.GA.super_">
        function <span class="apidocSignatureSpan">googleanalytics.GA.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.googleanalytics.GA.prototype" id="apidoc.module.googleanalytics.GA.prototype">module googleanalytics.GA.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.googleanalytics.GA.prototype.captureToken" id="apidoc.element.googleanalytics.GA.prototype.captureToken">
        function <span class="apidocSignatureSpan">googleanalytics.GA.prototype.</span>captureToken
        <span class="apidocSignatureSpan">(err, token)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">captureToken = function (err, token) {
    this.token = token;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.googleanalytics.GA.prototype.get" id="apidoc.element.googleanalytics.GA.prototype.get">
        function <span class="apidocSignatureSpan">googleanalytics.GA.prototype.</span>get
        <span class="apidocSignatureSpan">(options, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (options, cb) {
    var self = this;

    var rt = (options.metrics.lastIndexOf(&#x27;rt:&#x27;,0) === 0 ? true : false);
    var data_url = &#x22;/analytics/v3/data/&#x22; + (rt ? &#x22;realtime?&#x22; : &#x22;ga?&#x22;) + querystring.stringify(options);

    var get_options = {
        host: &#x27;www.googleapis.com&#x27;,
        port: 443,
        path: data_url,
        method: &#x27;GET&#x27;,
        headers: {
            Authorization: this.tokenType + &#x22; &#x22; + this.token,
            &#x22;GData-Version&#x22;: 2
        }
    };

    var req = https.request(get_options, function(res) {
        var chunks = [];
        var length = 0;
        res.on(&#x27;data&#x27;, function(chunk) {
            chunks.push(chunk);
            length += chunk.length;
        });
        res.on(&#x27;end&#x27;, function() {
            var entries = []
            ,metric_indexes = []
            ,metrics = []
            ,dimensions = []
            ,dimension_indexes = [];

            var data_data = combineChunks(chunks, length).toString();

            var parsed_data = JSON.parse(data_data);

            if (parsed_data.error) {
              var err = new Error(parsed_data.error.message);
              if (typeof cb === &#x27;function&#x27; ) {
                return cb(err);
              }
            }

            if (!parsed_data.rows) {
                parsed_data.rows = [];
            }

            for (var col=0; col&#x3c;parsed_data.columnHeaders.length; col++){
                if(parsed_data.columnHeaders[col][&#x27;columnType&#x27;] === &#x22;METRIC&#x22;){
                    metric_indexes.push(col);
                    metrics.push(parsed_data.columnHeaders[col]);
                }
                if(parsed_data.columnHeaders[col][&#x27;columnType&#x27;] === &#x22;DIMENSION&#x22;){
                    dimension_indexes.push(col);
                    dimensions.push(parsed_data.columnHeaders[col]);
                }
            }


            for (var i=0; i&#x3c;parsed_data.rows.length; i++){
                var entry = {metrics:[], dimensions:[]};

                var object_metric = {};
                for (var j=0; j&#x3c;metrics.length; j++){
                    object_metric[metrics[j].name] = parseFloat(parsed_data.rows[i][metric_indexes[j]]);
                }
                entry.metrics.push(object_metric);

                var object_dimension = {};
                for (var j=0; j&#x3c;dimensions.length; j++){
                    object_dimension[dimensions[j].name] = parsed_data.rows[i][dimension_indexes[j]];
                }
                entry.dimensions.push(object_dimension);

                self.emit(&#x27;entry&#x27;, entry);
                entries.push(entry);

            }

            if (typeof cb === &#x27;function&#x27; ) cb(null, entries);

        });
    });
    req.end();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.googleanalytics.GA.prototype.login" id="apidoc.element.googleanalytics.GA.prototype.login">
        function <span class="apidocSignatureSpan">googleanalytics.GA.prototype.</span>login
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">login = function (cb) {
    var self = this;

    this.removeAllListeners(&#x27;token&#x27;);

    this.on(&#x27;token&#x27;, this.captureToken);

    if (cb) this.on(&#x27;token&#x27;, cb);

    var postData = {
        Email: this.user,
        Passwd: this.password,
        accountType: &#x22;HOSTED_OR_GOOGLE&#x22;,
        source: &#x22;curl-accountFeed-v2&#x22;,
        service: &#x22;analytics&#x22;
    };

    var options = { host: &#x22;www.google.com&#x22;, port: 443, method: &#x27;POST&#x27;, path: &#x27;/accounts/ClientLogin&#x27;, headers: { &#x27;Content-Type&#x27;: &#x27;
application/x-www-form-urlencoded&#x27; } };
    var req = https.request(options, function(res) {
        var chunks = [];
        var length = 0;
        res.on(&#x27;data&#x27;, function(chunk) {
            chunks.push(chunk);
            length += chunk.length;
        });
        res.on(&#x27;end&#x27;, function() {
            var data = combineChunks(chunks, length).toString();
            var m = data.match(/(Auth=[^\s]*)\s/);
            if (!m) {
                m = data.match(/(Error=[^\s]*)\s/);
                if(m) {
                    var errMessage = m[0].replace(&#x27;Error=&#x27;, &#x27;&#x27;);
                    var err = new Error(errMessage);
                    err.responseData = data;
                    self.emit(&#x27;token&#x27;, err, null);
                } else {
                    self.emit(&#x27;error&#x27;, data);
                }
            } else {
                self.emit(&#x27;token&#x27;, null, m[1]);
            }
        });
    });
    req.write(querystring.stringify(postData));
    req.end();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
